# Story 1.9: Create Header and Footer Components

<!-- Powered by BMAD™ Core -->

## Status

**Draft**

---

## Story

**As a** User,
**I want** a header with branding and a footer with real-time metrics,
**so that** I can see the application name and monitor system performance (latency, token usage, cost) at a glance.

---

## Acceptance Criteria

1. Header component created at `orchestratai_client/src/components/layout/header.tsx`
2. Header displays "OrchestratAI" logo/title using typography tokens
3. Header displays subtitle: "LangGraph Orchestrator + RAG/CAG Hybrid"
4. Header displays system status badge (ACTIVE) using shadcn/ui Badge
5. Header uses design tokens for text colors and backgrounds
6. Footer component created at `orchestratai_client/src/components/layout/footer.tsx`
7. Footer displays 4 metric placeholders: Latency, Total Tokens, Total Cost, Database Status
8. Footer displays icons from lucide-react: Clock, Cpu, TrendingUp, Database
9. Footer metrics use design tokens for colors and spacing
10. Footer is responsive (stacks on mobile, horizontal on desktop)
11. Both components are Server Components (no 'use client' needed)
12. TypeScript compilation succeeds with zero errors
13. Unit tests written using Vitest + React Testing Library
14. Test (Header): Renders title and subtitle
15. Test (Header): Displays system status badge
16. Test (Footer): Renders all 4 metrics with icons
17. Test (Footer): Displays placeholder values
18. All unit tests pass

---

## Tasks / Subtasks

- [ ] **Task 1: Create Header Component File** (AC: 1, 11)
  - [ ] Create file `orchestratai_client/src/components/layout/header.tsx`
  - [ ] Do NOT add 'use client' directive (Server Component)
  - [ ] Import Badge from shadcn/ui

- [ ] **Task 2: Implement Header Structure** (AC: 2, 3, 4, 5)
  - [ ] Create functional component `Header`
  - [ ] Use semantic HTML: `<header>` element
  - [ ] Add branding section with h1: "OrchestratAI"
  - [ ] Use typography tokens: `text-2xl font-bold text-text-primary`
  - [ ] Add subtitle with p tag: "LangGraph Orchestrator + RAG/CAG Hybrid"
  - [ ] Use typography tokens: `text-sm text-text-secondary`
  - [ ] Add Badge component with "ACTIVE" text and success variant
  - [ ] Apply background: `bg-bg-secondary` and padding: `p-4`
  - [ ] Add border-bottom: `border-b border-border-default`

- [ ] **Task 3: Create Footer Component File** (AC: 6, 11)
  - [ ] Create file `orchestratai_client/src/components/layout/footer.tsx`
  - [ ] Do NOT add 'use client' directive (Server Component)
  - [ ] Import icons from lucide-react: Clock, Cpu, TrendingUp, Database

- [ ] **Task 4: Implement Footer Structure** (AC: 7, 8, 9, 10)
  - [ ] Create functional component `Footer`
  - [ ] Use semantic HTML: `<footer>` element
  - [ ] Create flex container: `flex flex-col md:flex-row justify-between items-center gap-4`
  - [ ] Apply background: `bg-bg-secondary` and padding: `p-4`
  - [ ] Add border-top: `border-t border-border-default`

- [ ] **Task 5: Implement Footer Metrics** (AC: 7, 8, 9)
  - [ ] Create Latency metric with Clock icon and text "Latency: --ms"
  - [ ] Create Total Tokens metric with Cpu icon and text "Tokens: --"
  - [ ] Create Total Cost metric with TrendingUp icon and text "Cost: $--"
  - [ ] Create Database Status metric with Database icon and text "ChromaDB: Connected"
  - [ ] Each metric: flex container with icon + text
  - [ ] Icon size: `h-4 w-4`
  - [ ] Text color: `text-text-secondary`
  - [ ] Use spacing tokens: `gap-2` between icon and text

- [ ] **Task 6: Integrate Header and Footer into Layout** (Integration)
  - [ ] Update `app/layout.tsx` or create wrapper component
  - [ ] Import Header and Footer components
  - [ ] Wrap three-panel-layout with Header above and Footer below
  - [ ] Structure: `<Header />` → `<ThreePanelLayout>` → `<Footer />`

- [ ] **Task 7: Validate TypeScript Compilation** (AC: 12)
  - [ ] Run `bunx tsc --noEmit --project orchestratai_client/tsconfig.json`
  - [ ] Verify zero TypeScript errors
  - [ ] Fix any type errors

- [ ] **Task 8: Create Header Unit Test File** (AC: 13)
  - [ ] Create file `orchestratai_client/tests/unit/components/layout/header.test.tsx`
  - [ ] Import Vitest utilities: `describe`, `it`, `expect`
  - [ ] Import React Testing Library: `render`, `screen`
  - [ ] Import component: `Header`

- [ ] **Task 9: Write Header Unit Tests** (AC: 14, 15, 18)
  - [ ] Write test: "renders title and subtitle"
  - [ ] Render `<Header />`
  - [ ] Assert title exists: `screen.getByText('OrchestratAI')`
  - [ ] Assert subtitle exists: `screen.getByText(/LangGraph Orchestrator/)`
  - [ ] Write test: "displays system status badge"
  - [ ] Assert badge exists: `screen.getByText('ACTIVE')`
  - [ ] Verify badge is visible

- [ ] **Task 10: Create Footer Unit Test File** (AC: 13)
  - [ ] Create file `orchestratai_client/tests/unit/components/layout/footer.test.tsx`
  - [ ] Import Vitest utilities: `describe`, `it`, `expect`
  - [ ] Import React Testing Library: `render`, `screen`
  - [ ] Import component: `Footer`

- [ ] **Task 11: Write Footer Unit Tests** (AC: 16, 17, 18)
  - [ ] Write test: "renders all 4 metrics with icons"
  - [ ] Render `<Footer />`
  - [ ] Assert Latency metric: `screen.getByText(/Latency:/)`
  - [ ] Assert Tokens metric: `screen.getByText(/Tokens:/)`
  - [ ] Assert Cost metric: `screen.getByText(/Cost:/)`
  - [ ] Assert Database metric: `screen.getByText(/ChromaDB:/)`
  - [ ] Write test: "displays placeholder values"
  - [ ] Assert placeholders: `--ms`, `--`, `$--`, `Connected`

- [ ] **Task 12: Run Unit Tests** (AC: 18)
  - [ ] Run `bun test header.test.tsx footer.test.tsx`
  - [ ] Verify all tests pass (2 header tests + 2 footer tests = 4 total)
  - [ ] Fix any failing tests
  - [ ] Check test coverage

- [ ] **Task 13: Manual Browser Testing**
  - [ ] Start dev server: `bun dev` or `docker compose up`
  - [ ] Navigate to http://localhost:3000
  - [ ] Verify header displays at top with title, subtitle, and ACTIVE badge
  - [ ] Verify footer displays at bottom with 4 metrics
  - [ ] Test responsive behavior (resize to mobile width)
  - [ ] Verify footer stacks vertically on mobile
  - [ ] Verify design tokens used (no hardcoded colors)

---

## Dev Notes

### Previous Story Insights

[Source: docs/stories/1.2.create-token-file-structure.story.md, 1.6.install-shadcn-ui-components.story.md]

**Design Token Foundation:**
- **Typography Tokens**: Story 1.2 created font sizes, weights, line heights
- **Color Tokens**: bg-bg-secondary, text-text-primary, text-text-secondary, border-border-default
- **Spacing Tokens**: Consistent padding/margin scale
- **Badge Component**: Story 1.6 installed Badge for status indicators

**Key Dependencies:**
- Design tokens from Story 1.2 for consistent styling
- Badge component from Story 1.6 for system status
- lucide-react icons from Story 1.6 installation

### Tech Stack Context

[Source: docs/architecture/3-tech-stack.md]

**Header/Footer Stack:**
- **Next.js 15**: Server Components (static content, no interactivity)
- **Tailwind CSS v4**: Typography, spacing, color utilities
- **shadcn/ui**: Badge component
- **lucide-react**: Clock, Cpu, TrendingUp, Database icons

**Why Server Components?**
- Header and Footer are static (no user interaction)
- Content doesn't change client-side
- SEO-friendly (rendered on server)
- No 'use client' directive needed

### Header Specifications

[Source: docs/prd/orchestratai_prd_v2.md - Section 4.1]

**Content:**
- **Logo/Title**: "OrchestratAI" (large, bold)
- **Subtitle**: "LangGraph Orchestrator + RAG/CAG Hybrid" (small, muted)
- **Status Badge**: "ACTIVE" (success variant)

**Layout:**
- Horizontal flex container
- Title/subtitle on left
- Status badge on right
- Full width with border-bottom

### Footer Specifications

[Source: docs/prd/orchestratai_prd_v2.md - Section 4.1]

**Metrics (4 total):**
1. **Latency**: Clock icon + "Latency: --ms" (placeholder)
2. **Total Tokens**: Cpu icon + "Tokens: --" (placeholder)
3. **Total Cost**: TrendingUp icon + "Cost: $--" (placeholder)
4. **Database Status**: Database icon + "ChromaDB: Connected"

**Layout:**
- Horizontal on desktop (≥768px): flex-row
- Vertical on mobile (<768px): flex-col
- Gap between metrics: `gap-4`
- Full width with border-top

**Note:** Real-time values will be added in Epic 2 when chat state management is implemented. This story creates placeholders.

### Component Implementations

**Complete Header Component:**

```tsx
// components/layout/header.tsx
import { Badge } from '@/components/ui/badge';

export function Header() {
  return (
    <header className="bg-bg-secondary border-b border-border-default p-4">
      <div className="flex items-center justify-between">
        {/* Branding */}
        <div>
          <h1 className="text-2xl font-bold text-text-primary">
            OrchestratAI
          </h1>
          <p className="text-sm text-text-secondary">
            LangGraph Orchestrator + RAG/CAG Hybrid
          </p>
        </div>

        {/* Status Badge */}
        <Badge variant="default" className="bg-green-500/10 text-green-500 border-green-500/20">
          ACTIVE
        </Badge>
      </div>
    </header>
  );
}
```

**Complete Footer Component:**

```tsx
// components/layout/footer.tsx
import { Clock, Cpu, TrendingUp, Database } from 'lucide-react';

export function Footer() {
  return (
    <footer className="bg-bg-secondary border-t border-border-default p-4">
      <div className="flex flex-col md:flex-row justify-between items-center gap-4">
        {/* Latency */}
        <div className="flex items-center gap-2 text-text-secondary text-sm">
          <Clock className="h-4 w-4" />
          <span>Latency: --ms</span>
        </div>

        {/* Total Tokens */}
        <div className="flex items-center gap-2 text-text-secondary text-sm">
          <Cpu className="h-4 w-4" />
          <span>Tokens: --</span>
        </div>

        {/* Total Cost */}
        <div className="flex items-center gap-2 text-text-secondary text-sm">
          <TrendingUp className="h-4 w-4" />
          <span>Cost: $--</span>
        </div>

        {/* Database Status */}
        <div className="flex items-center gap-2 text-text-secondary text-sm">
          <Database className="h-4 w-4" />
          <span>ChromaDB: Connected</span>
        </div>
      </div>
    </footer>
  );
}
```

**Integration Pattern:**

```tsx
// app/layout.tsx or app/page.tsx
import { Header } from '@/components/layout/header';
import { Footer } from '@/components/layout/footer';
import { ThreePanelLayout } from '@/components/layout/three-panel-layout';

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <div className="flex flex-col min-h-screen">
      <Header />
      <ThreePanelLayout>{children}</ThreePanelLayout>
      <Footer />
    </div>
  );
}
```

### Unit Testing with Vitest

**Header Test Suite:**

```typescript
// tests/unit/components/layout/header.test.tsx
import { describe, it, expect } from 'vitest';
import { render, screen } from '@testing-library/react';
import { Header } from '@/components/layout/header';

describe('Header', () => {
  it('renders title and subtitle', () => {
    render(<Header />);

    expect(screen.getByText('OrchestratAI')).toBeInTheDocument();
    expect(screen.getByText(/LangGraph Orchestrator/)).toBeInTheDocument();
  });

  it('displays system status badge', () => {
    render(<Header />);

    const badge = screen.getByText('ACTIVE');
    expect(badge).toBeInTheDocument();
  });
});
```

**Footer Test Suite:**

```typescript
// tests/unit/components/layout/footer.test.tsx
import { describe, it, expect } from 'vitest';
import { render, screen } from '@testing-library/react';
import { Footer } from '@/components/layout/footer';

describe('Footer', () => {
  it('renders all 4 metrics with icons', () => {
    render(<Footer />);

    expect(screen.getByText(/Latency:/)).toBeInTheDocument();
    expect(screen.getByText(/Tokens:/)).toBeInTheDocument();
    expect(screen.getByText(/Cost:/)).toBeInTheDocument();
    expect(screen.getByText(/ChromaDB:/)).toBeInTheDocument();
  });

  it('displays placeholder values', () => {
    render(<Footer />);

    expect(screen.getByText(/--ms/)).toBeInTheDocument();
    expect(screen.getByText(/Tokens: --/)).toBeInTheDocument();
    expect(screen.getByText(/\$--/)).toBeInTheDocument();
    expect(screen.getByText(/Connected/)).toBeInTheDocument();
  });
});
```

### Design Token Usage

[Source: docs/architecture/16-coding-standards.md - Section 5]

**Typography Tokens:**
- `text-2xl` - Header title (24px)
- `text-sm` - Subtitle and footer text (14px)
- `font-bold` - Header title weight

**Color Tokens:**
- `bg-bg-secondary` - Header/footer background (slate-900)
- `text-text-primary` - Header title (gray-50)
- `text-text-secondary` - Subtitle and metrics (gray-300)
- `border-border-default` - Border color (gray-700)

**Spacing Tokens:**
- `p-4` - Padding (16px)
- `gap-2` - Icon-text gap (8px)
- `gap-4` - Metric gap (16px)

**Correct Pattern:**
```tsx
// ✅ CORRECT: Use semantic tokens from @theme
<header className="bg-bg-secondary text-text-primary border-b border-border-default">

// ❌ WRONG: Direct Tailwind color classes
<header className="bg-slate-900 text-gray-50 border-gray-700">
```

### Responsive Design

[Source: docs/prd/orchestratai_prd_v2.md - Section 4.2]

**Footer Responsive Behavior:**
```tsx
// flex-col = stack vertically on mobile
// md:flex-row = horizontal on desktop (768px+)
<div className="flex flex-col md:flex-row justify-between items-center gap-4">
```

**Mobile (<768px):**
```
[ Latency: --ms    ]
[ Tokens: --       ]
[ Cost: $--        ]
[ ChromaDB: Conn.. ]
```

**Desktop (≥768px):**
```
[ Latency: --ms ] [ Tokens: -- ] [ Cost: $-- ] [ ChromaDB: Connected ]
```

### Accessibility (WCAG 2.1 AA)

[Source: docs/architecture/15-testing-strategy.md]

**Accessibility Features:**
- ✅ Semantic HTML (`<header>`, `<footer>`, `<h1>`)
- ✅ Proper heading hierarchy (h1 for main title)
- ✅ Sufficient color contrast (design tokens ensure this)
- ✅ Icons with adjacent text (screen reader friendly)

**Badge Accessibility:**
- shadcn/ui Badge component is accessible by default
- Text content ("ACTIVE") is readable by screen readers

### Coding Standards Compliance

[Source: docs/architecture/16-coding-standards.md]

**Critical Rules:**
- **Server Components**: No 'use client' directive (static content)
- **Design Tokens**: Use semantic tokens (bg-bg-secondary, text-text-primary)
- **NO Arbitrary Values**: All spacing/colors from design tokens
- **Semantic HTML**: Use `<header>`, `<footer>`, `<h1>` appropriately

### Testing Standards

[Source: docs/architecture/15-testing-strategy.md]

**Testing Approach for This Story:**
- ✅ **Unit tests REQUIRED** - UI components need validation
- ✅ **Test Framework**: Vitest + React Testing Library
- ✅ **Coverage Target**: 100% (simple components)
- ✅ **Test Types**: Rendering, content verification

**Test Pyramid (This Story):**
- 4 unit tests (2 header + 2 footer)
- 0 integration tests (static components)
- 0 e2e tests (no user interactions)

### Future Enhancements (Epic 2+)

[Source: docs/prd/orchestratai_prd_v2.md - Section 4.1]

**Epic 2 Will Add:**
- Real-time latency values from chat responses
- Token usage tracking from agent interactions
- Cost calculation based on token usage
- Database connection status from backend

**Current Story:**
- Creates static placeholders with `--` values
- Provides structure for real-time updates later

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-24 | 1.0 | Initial story creation for header and footer components | Bob (Scrum Master) |

---

## Dev Agent Record

### Agent Model Used

*To be completed by Dev Agent*

### Debug Log References

*To be completed by Dev Agent*

### Completion Notes

*To be completed by Dev Agent*

### File List

*To be completed by Dev Agent*

---

## QA Results

*To be completed by QA Agent*
